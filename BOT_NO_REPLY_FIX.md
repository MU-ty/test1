# 📸 Bot 不回复？看这个图就能修复！

## 问题：@activity-bot extract 命令后，Bot 没有回复

---

## ✅ 解决方案 (只需 3 步)

### 🔴 第 1 步: 获取 Token

**打开链接**: https://github.com/settings/tokens

```
┌─────────────────────────────────────────────────────┐
│  GitHub                                             │
├─────────────────────────────────────────────────────┤
│                                                     │
│  Settings → Developer settings → Tokens (classic)  │
│                                                     │
│  [Generate new token (classic)] ← 点击这个按钮     │
│                                                     │
└─────────────────────────────────────────────────────┘
```

**填写表单**:
```
┌─────────────────────────────────────────────────────┐
│  New personal access token                          │
├─────────────────────────────────────────────────────┤
│                                                     │
│  Note                                              │
│  ┌─────────────────────────────────────────────┐  │
│  │ AI Bot - GitHub Models                      │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
│  Expiration                                         │
│  ┌──────────┐                                       │
│  │ 90 days  │  ← 选择 90 天                        │
│  └──────────┘                                       │
│                                                     │
│  Scopes                                             │
│  ☑ repo (Full control)                             │
│  ☑ read:org (Read org and team...)                 │
│                                                     │
│  [Generate token] ← 点击生成                       │
│                                                     │
└─────────────────────────────────────────────────────┘
```

**⚠️ 重要**: 复制显示的 token (只显示一次!)

```
┌─────────────────────────────────────────────────────┐
│  Your new personal access token is:                 │
│                                                     │
│  ghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX... ← 复制这个   │
│                                                     │
│  [Copy]  [X]                                        │
│                                                     │
│  ⚠️ Make sure to copy it now. You won't be able    │
│     to see it again!                               │
│                                                     │
└─────────────────────────────────────────────────────┘
```

---

### 🔴 第 2 步: 添加到仓库

**打开你的仓库** → 点击 **Settings**

```
┌──────────────────────────────────────────────────┐
│  Your Repository                                 │
├──────────────────────────────────────────────────┤
│  Code  Issues  Pull requests  Actions             │
│  Settings  ← 点击这里                            │
└──────────────────────────────────────────────────┘
```

**左侧菜单** → 找到 **Secrets and variables**

```
┌─────────────────────────────────────────┐
│  左侧菜单                               │
├─────────────────────────────────────────┤
│                                         │
│  Security                               │
│  ├─ Secrets and variables  ← 点击这里  │
│  │  └─ Actions             ← 再点击    │
│  └─ Environments                        │
│                                         │
│  其他菜单...                            │
│                                         │
└─────────────────────────────────────────┘
```

**点击 "New repository secret"**

```
┌─────────────────────────────────────────┐
│  Actions secrets and variables          │
├─────────────────────────────────────────┤
│                                         │
│  Repository secrets                     │
│  [New repository secret] ← 点击绿色按钮 │
│                                         │
│  Currently there are no repository     │
│  secrets.                              │
│                                         │
└─────────────────────────────────────────┘
```

**填写 Secret 信息**

```
┌─────────────────────────────────────────────────────┐
│  New secret                                         │
├─────────────────────────────────────────────────────┤
│                                                     │
│  Name *                                            │
│  ┌─────────────────────────────────────────────┐  │
│  │ GH_MODELS_TOKEN                             │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
│  Secret *                                          │
│  ┌─────────────────────────────────────────────┐  │
│  │ ghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX...        │  │
│  │ (粘贴刚才复制的 token)                      │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
│  [Add secret] ← 点击保存                          │
│                                                     │
└─────────────────────────────────────────────────────┘
```

✅ **完成！** Secret 已添加

```
┌─────────────────────────────────────────┐
│  Repository secrets                     │
├─────────────────────────────────────────┤
│                                         │
│  GH_MODELS_TOKEN  ●●●●●●●●●●●  Updated │
│                                    now │
│                                         │
└─────────────────────────────────────────┘
```

---

### 🔴 第 3 步: 测试

**回到你的 Issue #1**

```
┌─────────────────────────────────────────────────────┐
│  issue:add activities #1                           │
├─────────────────────────────────────────────────────┤
│                                                     │
│  你的评论                                          │
│  @activity-bot extract https://competition...     │
│                                                     │
│                                                     │
│  [Add a comment]                                   │
│                                                     │
│  ┌─────────────────────────────────────────────┐  │
│  │ 在这里输入新评论:                           │  │
│  │                                             │  │
│  │ @activity-bot extract \                    │  │
│  │ https://competition.atomgit.com/competition│  │
│  │                                             │  │
│  │ [Comment]                                  │  │
│  └─────────────────────────────────────────────┘  │
│                                                     │
└─────────────────────────────────────────────────────┘
```

**等待 1-2 分钟...**

**🎉 Bot 应该会回复！**

```
┌─────────────────────────────────────────────────────┐
│  activity-bot                                       │
│  ✓ 提取成功！                                       │
│                                                     │
│  标题: AtomGit Programming Competition             │
│  描述: A programming competition platform...       │
│  开始日期: 2024-01-01                              │
│  结束日期: 2024-12-31                              │
│  地点: Online                                      │
│  标签: [programming, competition, coding]         │
│  来源: https://competition.atomgit.com/competition │
│                                                     │
│  ──────────────────────────────────────────────────│
│  现在你可以输入: @activity-bot confirm            │
│                                                     │
└─────────────────────────────────────────────────────┘
```

---

## 🆘 还是不工作？

### 检查 1: 权限设置

**Settings → Actions → General**

```
┌─────────────────────────────────────────────────┐
│  Workflow permissions                           │
├─────────────────────────────────────────────────┤
│                                                 │
│  ◉ Read and write permissions  ← 选择这个      │
│  ○ Read repository contents only               │
│                                                 │
│  ☑ Allow GitHub Actions to create and         │
│    approve pull requests                       │
│                                                 │
│  [Save]                                         │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 检查 2: 查看日志

**点击 Actions 标签**

```
┌────────────────────────────────────────────┐
│  Actions                                   │
├────────────────────────────────────────────┤
│                                            │
│  左侧:                                    │
│  └─ ai-bot-handler  ← 点击               │
│                                            │
│  右侧:                                    │
│  [Run workflow]                            │
│  • ai-bot-extract #N...  ← 点击最新的    │
│                                            │
└────────────────────────────────────────────┘
```

**查看日志**

```
┌────────────────────────────────────────────┐
│  ai-bot-extract #N                         │
├────────────────────────────────────────────┤
│                                            │
│  handle-bot-command  ← 点击这里           │
│                                            │
│  Logs:                                     │
│  Run Python handler                        │
│  ...                                       │
│  Error: ... (查看错误信息)                 │
│                                            │
└────────────────────────────────────────────┘
```

---

## 📋 快速检查清单

```
配置 GH_MODELS_TOKEN Secret
├─ [ ] 打开 https://github.com/settings/tokens
├─ [ ] 创建新 token
├─ [ ] 复制 token
├─ [ ] Settings → Secrets → Actions
├─ [ ] New repository secret
├─ [ ] Name: GH_MODELS_TOKEN
├─ [ ] Value: 粘贴 token
├─ [ ] Add secret
├─ [ ] 在 Issue 中重新输入命令
└─ [ ] 等待 1-2 分钟

如果还是不工作
├─ [ ] 检查 Actions 权限
├─ [ ] 查看 Actions 日志
├─ [ ] 检查命令格式
└─ [ ] 重新测试
```

---

## ✨ 成功的迹象

✅ **看到这样的回复** = 配置正确！

```
✓ 提取成功！

标题: ...
描述: ...
开始日期: ...
结束日期: ...
地点: ...
标签: [...]
来源: ...

现在可以输入: @activity-bot confirm
```

---

## 🎯 总结

| 步骤 | 操作 | 时间 |
|------|------|------|
| 1 | 获取 token | 2分钟 |
| 2 | 添加到 secrets | 2分钟 |
| 3 | 重新测试 | 1分钟 |
| **总计** | **仅需 5 分钟** | ✅ |

**现在就开始吧！** 🚀
